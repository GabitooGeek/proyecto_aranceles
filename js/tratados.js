document.addEventListener('DOMContentLoaded', () => { const searchInput = document.getElementById('treatySearchInput'), treatiesGrid = document.getElementById('treaties-grid'); if (!searchInput || !treatiesGrid) return; const renderTreaties = (tratados) => { treatiesGrid.innerHTML = ''; if (tratados.length === 0) { treatiesGrid.innerHTML = '<p>No se encontraron resultados.</p>'; return; } tratados.forEach(t => { treatiesGrid.innerHTML += `<div class="treaty-card"><h3><span class="material-symbols-outlined">public</span> ${t.nombre}</h3><p><strong>Pa√≠ses:</strong> ${t.paises}</p><p><strong>Beneficio:</strong> ${t.beneficio}</p><small>${t.nota}</small></div>`; }); }; const fetchTreaties = async (query = '') => { treatiesGrid.innerHTML = '<p style="color: #a0a0a0;">Cargando tratados...</p>'; try { const res = await fetch(`http://localhost:8888/api/tratados?q=${query}`, { cache: 'no-cache' }); if (!res.ok) throw new Error('Error'); const data = await res.json(); renderTreaties(data); } catch (error) { treatiesGrid.innerHTML = '<p style="color: #d9534f;">Error al conectar con el servidor.</p>'; } }; searchInput.addEventListener('input', e => fetchTreaties(e.target.value)); fetchTreaties(); });
